#include <iostream>
#define max(a, b) a < b ? b : a
using namespace std;

int ts[19][4][4] = {
{{1,1,1,1},
{0,0,0,0},
{0,0,0,0},
{0,0,0,0}},
{{1,0,0,0},
{1,0,0,0},
{1,0,0,0},
{1,0,0,0}},
{{1,1,0,0},
{1,1,0,0},
{0,0,0,0},
{0,0,0,0}},	// 3
{{1,0,0,0},
{1,0,0,0},
{1,1,0,0},
{0,0,0,0}},
{{1,1,1,0},
{1,0,0,0},
{0,0,0,0},
{0,0,0,0}},
{{1,1,0,0},
{0,1,0,0},
{0,1,0,0},
{0,0,0,0}},	// 6
{{0,0,1,0},
{1,1,1,0},
{0,0,0,0},
{0,0,0,0}},
{{0,1,0,0},
{0,1,0,0},
{1,1,0,0},
{0,0,0,0}},
{{1,0,0,0},
{1,1,1,0},
{0,0,0,0},
{0,0,0,0}},	// 9
{{1,1,0,0},
{1,0,0,0},
{1,0,0,0},
{0,0,0,0}},
{{1,1,1,0},
{0,0,1,0},
{0,0,0,0},
{0,0,0,0}},
{{1,0,0,0},
{1,1,0,0},
{0,1,0,0},
{0,0,0,0}},	// 12
{{0,1,1,0},
{1,1,0,0},
{0,0,0,0},
{0,0,0,0}},
{{0,1,0,0},
{1,1,0,0},
{1,0,0,0},
{0,0,0,0}},
{{1,1,0,0},
{0,1,1,0},
{0,0,0,0},
{0,0,0,0}},	// 15
{{1,1,1,0},
{0,1,0,0},
{0,0,0,0},
{0,0,0,0}},
{{1,0,0,0},
{1,1,0,0},
{1,0,0,0},
{0,0,0,0}},
{{0,1,0,0},
{1,1,0,0},
{0,1,0,0},
{0,0,0,0}},	// 18
{{0,1,0,0},
{1,1,1,0},
{0,0,0,0},
{0,0,0,0}}
};
int N, M;
int map[505][505];

int main(void) {
	cin >> N >> M;
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < M; j++) {
			cin >> map[i][j];
		}
	}
	int answer = 0;
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < M; j++) {
			for (int k = 0; k < 19; k++) {
				int tmp_answer = 0;
				for (int ia = 0; ia < 4; ia++) {
					for (int ib = 0; ib < 4; ib++) {
						tmp_answer += ts[k][ia][ib] * map[i + ia][j + ib];
					}
				}
				answer = max(answer, tmp_answer);
			}
		}
	}
	printf("%d\n", answer);

	return 0;
}